name: interactive-cpu
#image: mosaicml/pytorch:2.2.2_cu121-python3.11-ubuntu20.04
image: mosaicml/llm-foundry:2.3.1_cu121-latest

integrations:
- integration_type: git_repo
  git_repo: mosaicml/llm-foundry
  git_branch: v0.10.0 # use your branch
  pip_install: .[gpu,databricks]
  ssh_clone: false # Should be true if using a private repo

command: |
  curl -fsSL https://raw.githubusercontent.com/databricks/setup-cli/main/install.sh | sh
  trap '/tmp/code tunnel unregister' EXIT
  cd /tmp && curl -Lk 'https://code.visualstudio.com/sha/download?build=stable&os=cli-alpine-x64' --output vscode_cli.tar.gz
  tar -xf vscode_cli.tar.gz
  tail -f /dev/null
  # /tmp/code tunnel --accept-server-license-terms --no-sleep --name mml-dev-01

compute:
  gpus: 0
  cluster: r8z11
